<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>野生动物</title>
    <meta name="description" content="茂茂的成长之路，包含前端常用知识、源码阅读笔记、各种奇淫技巧、日常提效工具等">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/Blog/assets/style.C8Inz8k0.css" as="style">
    <link rel="preload stylesheet" href="/Blog/vp-icons.css" as="style">
    
    <script type="module" src="/Blog/assets/app.BMOPpL5S.js"></script>
    <link rel="preload" href="/Blog/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/Blog/assets/chunks/theme.C1uWRWUm.js">
    <link rel="modulepreload" href="/Blog/assets/chunks/framework.C_m7SF9B.js">
    <link rel="modulepreload" href="/Blog/assets/interview_js_内存管理.md.gDrdGZ7k.lean.js">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/favicon.ico">
    <link rel="mask-icon" href="/favicon.ico" color="#3eaf7c">
    <meta name="msapplication-TileImage" content="/favicon.ico">
    <meta name="msapplication-TileColor" content="#000000">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-38af85f1><!--[--><!--]--><!--[--><span tabindex="-1" data-v-b171ba93></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-b171ba93> Skip to content </a><!--]--><!----><header class="VPNav" data-v-38af85f1 data-v-b8f805fa><div class="VPNavBar" data-v-b8f805fa data-v-60c94a68><div class="wrapper" data-v-60c94a68><div class="container" data-v-60c94a68><div class="title" data-v-60c94a68><div class="VPNavBarTitle" data-v-60c94a68 data-v-407dfe2f><a class="title" href="/Blog/" data-v-407dfe2f><!--[--><!--]--><!--[--><img class="VPImage logo" src="/Blog/mine.jpg" alt data-v-4e2b3234><!--]--><span data-v-407dfe2f>野生动物</span><!--[--><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--><!--]--></a></div></div><div class="content" data-v-60c94a68><div class="content-body" data-v-60c94a68><!--[--><!--]--><div class="VPNavBarSearch search" data-v-60c94a68><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-60c94a68 data-v-978bfb3c><span id="main-nav-aria-label" class="visually-hidden" data-v-978bfb3c> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Blog/nav/" tabindex="0" data-v-978bfb3c data-v-1a308f5e><!--[--><span data-v-1a308f5e>前端导航</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-978bfb3c data-v-c39ff604><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-c39ff604><span class="text" data-v-c39ff604><!----><span data-v-c39ff604>前端物语</span><span class="vpi-chevron-down text-icon" data-v-c39ff604></span></span></button><div class="menu" data-v-c39ff604><div class="VPMenu" data-v-c39ff604 data-v-2415931a><div class="items" data-v-2415931a><!--[--><!--[--><div class="VPMenuLink" data-v-2415931a data-v-7b33824f><a class="VPLink link vp-external-link-icon" href="https://github.com/wild2life/Blog" target="_blank" rel="noreferrer" data-v-7b33824f><!--[--><span data-v-7b33824f>JS基础知识</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-2415931a data-v-7b33824f><a class="VPLink link vp-external-link-icon" href="https://github.com/wild2life/Blog" target="_blank" rel="noreferrer" data-v-7b33824f><!--[--><span data-v-7b33824f>JS基础知识</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-2415931a data-v-7b33824f><a class="VPLink link vp-external-link-icon" href="https://github.com/wild2life/Blog" target="_blank" rel="noreferrer" data-v-7b33824f><!--[--><span data-v-7b33824f>JS基础知识</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-2415931a data-v-7b33824f><a class="VPLink link vp-external-link-icon" href="https://github.com/wild2life/Blog" target="_blank" rel="noreferrer" data-v-7b33824f><!--[--><span data-v-7b33824f>ES6常用知识</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-2415931a data-v-7b33824f><a class="VPLink link vp-external-link-icon" href="https://github.com/wild2life/Blog" target="_blank" rel="noreferrer" data-v-7b33824f><!--[--><span data-v-7b33824f>Monorepo</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-978bfb3c data-v-c39ff604><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-c39ff604><span class="text" data-v-c39ff604><!----><span data-v-c39ff604>源码阅读</span><span class="vpi-chevron-down text-icon" data-v-c39ff604></span></span></button><div class="menu" data-v-c39ff604><div class="VPMenu" data-v-c39ff604 data-v-2415931a><div class="items" data-v-2415931a><!--[--><!--[--><div class="VPMenuLink" data-v-2415931a data-v-7b33824f><a class="VPLink link vp-external-link-icon" href="https://github.com/wild2life/Blog" target="_blank" rel="noreferrer" data-v-7b33824f><!--[--><span data-v-7b33824f>Vue</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-2415931a data-v-7b33824f><a class="VPLink link vp-external-link-icon" href="https://github.com/wild2life/Blog" target="_blank" rel="noreferrer" data-v-7b33824f><!--[--><span data-v-7b33824f>React</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-978bfb3c data-v-c39ff604><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-c39ff604><span class="text" data-v-c39ff604><!----><span data-v-c39ff604>笔记</span><span class="vpi-chevron-down text-icon" data-v-c39ff604></span></span></button><div class="menu" data-v-c39ff604><div class="VPMenu" data-v-c39ff604 data-v-2415931a><div class="items" data-v-2415931a><!--[--><!--[--><div class="VPMenuLink" data-v-2415931a data-v-7b33824f><a class="VPLink link vp-external-link-icon" href="https://github.com/wild2life/Blog" target="_blank" rel="noreferrer" data-v-7b33824f><!--[--><span data-v-7b33824f>Vue</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-2415931a data-v-7b33824f><a class="VPLink link vp-external-link-icon" href="https://github.com/wild2life/Blog" target="_blank" rel="noreferrer" data-v-7b33824f><!--[--><span data-v-7b33824f>React</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-60c94a68 data-v-8a7ba667><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-8a7ba667 data-v-6bac911b data-v-3551c56f><span class="check" data-v-3551c56f><span class="icon" data-v-3551c56f><!--[--><span class="vpi-sun sun" data-v-6bac911b></span><span class="vpi-moon moon" data-v-6bac911b></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-60c94a68 data-v-2ec688f6 data-v-2db439ee><!--[--><a class="VPSocialLink no-icon" href="https://github.com/wild2life/Blog" aria-label="github" target="_blank" rel="noopener" data-v-2db439ee data-v-1aed805d><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-60c94a68 data-v-dcf63885 data-v-c39ff604><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-c39ff604><span class="vpi-more-horizontal icon" data-v-c39ff604></span></button><div class="menu" data-v-c39ff604><div class="VPMenu" data-v-c39ff604 data-v-2415931a><!----><!--[--><!--[--><!----><div class="group" data-v-dcf63885><div class="item appearance" data-v-dcf63885><p class="label" data-v-dcf63885>主题</p><div class="appearance-action" data-v-dcf63885><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-dcf63885 data-v-6bac911b data-v-3551c56f><span class="check" data-v-3551c56f><span class="icon" data-v-3551c56f><!--[--><span class="vpi-sun sun" data-v-6bac911b></span><span class="vpi-moon moon" data-v-6bac911b></span><!--]--></span></span></button></div></div></div><div class="group" data-v-dcf63885><div class="item social-links" data-v-dcf63885><div class="VPSocialLinks social-links-list" data-v-dcf63885 data-v-2db439ee><!--[--><a class="VPSocialLink no-icon" href="https://github.com/wild2life/Blog" aria-label="github" target="_blank" rel="noopener" data-v-2db439ee data-v-1aed805d><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-60c94a68 data-v-3b642e6e><span class="container" data-v-3b642e6e><span class="top" data-v-3b642e6e></span><span class="middle" data-v-3b642e6e></span><span class="bottom" data-v-3b642e6e></span></span></button></div></div></div></div><div class="divider" data-v-60c94a68><div class="divider-line" data-v-60c94a68></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-38af85f1 data-v-fa31db6d><div class="container" data-v-fa31db6d><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-fa31db6d data-v-e2e39d1b><button data-v-e2e39d1b>回到顶部</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-38af85f1 data-v-417913db><div class="VPDoc has-aside" data-v-417913db data-v-f3a512fe><!--[--><!--]--><div class="container" data-v-f3a512fe><div class="aside" data-v-f3a512fe><div class="aside-curtain" data-v-f3a512fe></div><div class="aside-container" data-v-f3a512fe><div class="aside-content" data-v-f3a512fe><div class="VPDocAside" data-v-f3a512fe data-v-675d451f><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-675d451f data-v-d492898f><div class="content" data-v-d492898f><div class="outline-marker" data-v-d492898f></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-d492898f>目录</div><ul class="VPDocOutlineItem root" data-v-d492898f data-v-aee624ed><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-675d451f></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f3a512fe><div class="content-container" data-v-f3a512fe><!--[--><!--]--><main class="main" data-v-f3a512fe><div style="position:relative;" class="vp-doc _Blog_interview_js_%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86" data-v-f3a512fe><div><p>减少浏览器的负担</p><p>JS的内存空间分为栈(stack)、堆(heap)、池(一般也会归类为栈中)。 其中栈存放变量，堆存放复杂对象，池存放常量，所以也叫常量池。</p><h2 id="内存" tabindex="-1">内存 <a class="header-anchor" href="#内存" aria-label="Permalink to &quot;内存&quot;">​</a></h2><p>基本类型</p><ol><li>Sting</li><li>Number</li><li>Boolean</li><li>null</li><li>undefined</li><li>Symbol</li></ol><h3 id="栈内存" tabindex="-1">栈内存 <a class="header-anchor" href="#栈内存" aria-label="Permalink to &quot;栈内存&quot;">​</a></h3><h6 id="连续-普通类型存储-值和变量本身放在一起" tabindex="-1">连续 普通类型存储 值和变量本身放在一起 <a class="header-anchor" href="#连续-普通类型存储-值和变量本身放在一起" aria-label="Permalink to &quot;连续  普通类型存储  值和变量本身放在一起&quot;">​</a></h6><p>基本数据类型保存在栈内存中，因为基本数据类型占用空间小、大小固定，通过按值来访问，属于被频繁使用的数据</p><h3 id="" tabindex="-1"><img src="https://cdn.nlark.com/yuque/0/2021/png/292785/1638255699478-a017607b-2eb2-41f2-a804-d2b214825e06.png#clientId=u0af62612-21ca-4&amp;from=paste&amp;height=479&amp;id=u6ba7b618&amp;name=image.png&amp;originHeight=958&amp;originWidth=1574&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=145914&amp;status=done&amp;style=none&amp;taskId=ubdcfa520-872d-4861-99c5-3d7c9d947cf&amp;title=&amp;width=787" alt="image.png"> <a class="header-anchor" href="#" aria-label="Permalink to &quot;![image.png](https://cdn.nlark.com/yuque/0/2021/png/292785/1638255699478-a017607b-2eb2-41f2-a804-d2b214825e06.png#clientId=u0af62612-21ca-4&amp;from=paste&amp;height=479&amp;id=u6ba7b618&amp;name=image.png&amp;originHeight=958&amp;originWidth=1574&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=145914&amp;status=done&amp;style=none&amp;taskId=ubdcfa520-872d-4861-99c5-3d7c9d947cf&amp;title=&amp;width=787)&quot;">​</a></h3><h3 id="堆内存" tabindex="-1">堆内存 <a class="header-anchor" href="#堆内存" aria-label="Permalink to &quot;堆内存&quot;">​</a></h3><p>不连续 对象本身会放在堆内存里面 变量本身放在栈内存里 指向堆内存的地址</p><p>Array,Function,Object...可以认为除了上文提到的基本数据类型以外，所有类型都是引用数据类型。 引用数据类型存储在堆内存中，因为引用数据类型占据空间大、大小不固定。 如果存储在栈中，将会影响程序运行的性能； 引用数据类型在栈中存储了指针，该指针指向堆中该实体的起始地址。 当解释器寻找引用值时，会首先检索其在栈中的地址，取得地址后从堆中获得实体 rensh <img src="https://cdn.nlark.com/yuque/0/2021/png/292785/1638255610108-322cc87b-2d1c-47e3-9cab-19874c2cb5ef.png#clientId=u0af62612-21ca-4&amp;from=paste&amp;height=634&amp;id=u5096330c&amp;name=image.png&amp;originHeight=1268&amp;originWidth=2366&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=758225&amp;status=done&amp;style=none&amp;taskId=u17f21f55-3864-4598-b82e-dc78c93ad2d&amp;title=&amp;width=1183" alt="image.png"><img src="https://cdn.nlark.com/yuque/0/2021/png/292785/1639114497763-2871c89a-5862-4bde-8977-0aa2e1b89271.png#clientId=u0cf11d8e-aa02-4&amp;from=paste&amp;height=377&amp;id=ub421448c&amp;name=image.png&amp;originHeight=377&amp;originWidth=653&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=86874&amp;status=done&amp;style=none&amp;taskId=u5817c86d-d784-46b2-b5bb-4e717e14dcd&amp;title=&amp;width=653" alt="image.png"></p><h2 id="认识v8" tabindex="-1">认识V8 <a class="header-anchor" href="#认识v8" aria-label="Permalink to &quot;认识V8&quot;">​</a></h2><ul><li>V8 —— 是 Google 发布的主流的开源 JavaScript 引擎，采用 C++ 编写。采用即时编译，直接翻译成机器语言，并且使用了如内联缓存（inline caching）等方法来提高性能。有了这些功能，JavaScript程序在V8引擎下的运行速度媲美二进制程序。</li><li>V8内存设限：这么设限为了浏览器使用内存足够，内部还有垃圾运行机制，时间也在用户感知的合理范围 <ul><li>64bit操作系统上不超过1.5G</li><li>32bit操作系统上不超过800M</li></ul></li></ul><ol><li>64位下是1.4G</li><li>32位下700MB</li><li>根据浏览器不同会有些许的扩容 node情况下会有C++内存扩容</li></ol><p>设限原因：</p><ul><li>1.4G对于浏览器脚本来说足够使用</li><li>回收是阻塞式的 垃圾回收会中断代码的执行 必须要限制</li></ul><p>这么设限为了浏览器使用内存足够，内部还有垃圾运行机制，时间也在用户感知的合理范围</p><h2 id="v8垃圾回收策略" tabindex="-1">V8垃圾回收策略 <a class="header-anchor" href="#v8垃圾回收策略" aria-label="Permalink to &quot;V8垃圾回收策略&quot;">​</a></h2><p>程序的使用过程中，可以分为 <strong>原始类型数据</strong> 和 <strong>对象类型数据</strong> 。 原始数据都是由程序语言自身控制的，这里的回收还是指<strong>主要存活在堆区的对象数据</strong>，这个过程是离不开内存操作的，V8也是对内存做了上限，那在这种情况下是如何对垃圾进行回收的?</p><ul><li>采用分代回收的思想</li><li>内存分为新生代存储区、老生代存储区</li><li>针对不同代采用不同的算法</li></ul><p>所以V8中会用到更多的GC算法，这里对GC算法不懂的还有这篇文章中说到的标记清除、整理等算法详细<a href="https://segmentfault.com/a/1190000038461201" target="_blank" rel="noreferrer">https://segmentfault.com/a/1190000038461201</a></p><h2 id="v8常用的gc算法" tabindex="-1">V8常用的GC算法 <a class="header-anchor" href="#v8常用的gc算法" aria-label="Permalink to &quot;V8常用的GC算法&quot;">​</a></h2><ul><li>分代回收 (一定会用)</li><li>空间复制</li><li>标记清除</li><li>标记整理</li><li>标记增量 (提高效率用)</li></ul><h2 id="v8的分代回收" tabindex="-1">V8的分代回收 <a class="header-anchor" href="#v8的分代回收" aria-label="Permalink to &quot;V8的分代回收&quot;">​</a></h2><ul><li><strong>新生代</strong> —— 就是指存活时间较短的对象，例如：一个局部作用域中，只要函数执行完毕之后变量就会回收。</li><li><strong>老生代</strong> —— 就是指存活时间较长的对象，例如：全局对象，闭包变量数据。</li></ul><h3 id="v8的内存分配" tabindex="-1">V8的内存分配 <a class="header-anchor" href="#v8的内存分配" aria-label="Permalink to &quot;V8的内存分配&quot;">​</a></h3><p><img src="https://cdn.nlark.com/yuque/0/2021/png/292785/1638257448458-eceb0f05-b280-4e4f-bd6b-e6c9aa7278be.png#clientId=u0af62612-21ca-4&amp;from=paste&amp;height=274&amp;id=u183bca8e&amp;name=image.png&amp;originHeight=548&amp;originWidth=2308&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=320893&amp;status=done&amp;style=none&amp;taskId=uc2f18846-c5bc-4d42-bc9d-90aec2fb926&amp;title=&amp;width=1154" alt="image.png"></p><ul><li>左边小空间用于存储新生代对象 <ul><li>64bit操作系统上不超过32M</li><li>32bit操作系统上不超过16M</li></ul></li><li>右边较大空间用于存储老生代对象 <ul><li>64bit操作系统上不超过1.6G</li><li>32bit操作系统上不超过700M</li></ul></li></ul><h3 id="新生代对象回收" tabindex="-1">新生代对象回收 <a class="header-anchor" href="#新生代对象回收" aria-label="Permalink to &quot;新生代对象回收&quot;">​</a></h3><h4 id="主要使用算法" tabindex="-1">主要使用算法 <a class="header-anchor" href="#主要使用算法" aria-label="Permalink to &quot;主要使用算法&quot;">​</a></h4><p>采用赋值算法 + 标记整理算法</p><h4 id="回收过程" tabindex="-1">回收过程 <a class="header-anchor" href="#回收过程" aria-label="Permalink to &quot;回收过程&quot;">​</a></h4><p>新生代内存区分为两个等大小空间，使用空间为From，空闲空间为To。 如果需要申请空间使用，回收步骤如下：</p><ol><li>首先会将所有活动对象存储于From空间，这个过程中To是空闲状态。</li><li>当From空间使用到一定程度之后就会触发GC操作，这个时候会进行标记整理对活动对象进行标记并移动位置将使用空间变得连续，便于后续不会产生碎片化空间。</li><li>将活动对象拷贝至To空间，拷贝完成之后活动空间就有了备份，这个时候就可以考虑回收操作了。</li><li>把From空间完成释放，回收完成</li><li>对From和To名称进行调换，继续重复之前的操作。</li></ol><p>总结就是： 使用From -&gt; 触发GC标记整理 -&gt; 拷贝到To -&gt; 回收From -&gt; 名称互换重复之前</p><h4 id="晋升" tabindex="-1">晋升 <a class="header-anchor" href="#晋升" aria-label="Permalink to &quot;晋升&quot;">​</a></h4><p>拷贝的过程中某个对象的指代在老生代空间，就可能出现晋升。 <strong>晋升就是将新生代对象移动至老生代。</strong><strong>什么时候触发晋升操作?</strong></p><ol><li>一轮GC之后还存活的新生代对象需要晋升</li><li>在拷贝过程中，To空间的使用率超过25%，将这次的活动对象都移动至老生代空间</li></ol><p><strong>为什么是限制To的使用率呢?</strong> 将来回收操作是要把From空间的内容拷贝到To空间中进行交换，如果To的使用率太高，变成From之后新的对象就存不进去了。</p><h3 id="老生代对象回收" tabindex="-1">老生代对象回收 <a class="header-anchor" href="#老生代对象回收" aria-label="Permalink to &quot;老生代对象回收&quot;">​</a></h3><h4 id="主要使用算法-1" tabindex="-1">主要使用算法 <a class="header-anchor" href="#主要使用算法-1" aria-label="Permalink to &quot;主要使用算法&quot;">​</a></h4><p>主要采用标记清除 <strong>（首要）</strong> 、标记整理、增量标记算法</p><ul><li>标记清除：虽然使用标记清除会有空间碎片化的问题，但是标记清除提升的速度是很快的。</li><li>标记整理：在晋升的时候且老生代区域的空间也不够容纳的时候，就会采用标记整理进行 <strong>空间优化</strong>。</li><li>增量标记：将一整段的垃圾回收操作标记拆分成多个小段完成回收，主要是为了实现程序和垃圾回收的交替完成，这样进行 <strong>效率优化</strong> 带来的时间消耗更加的合理。</li></ul><p>之前标记清除和整理的原理都在GC那篇文章中解释，这里就详情看看增量标记是如何工作的?</p><h4 id="标记增量如何优化垃圾回收" tabindex="-1">标记增量如何优化垃圾回收? <a class="header-anchor" href="#标记增量如何优化垃圾回收" aria-label="Permalink to &quot;标记增量如何优化垃圾回收?&quot;">​</a></h4><p>看图可以将垃圾回收分成两个部分，一个是程序的执行，一个是垃圾的回收。当垃圾回收的时候其实会阻塞程序的执行，所以中间会有空档期。 <img src="https://cdn.nlark.com/yuque/0/2021/png/292785/1638257651837-6e2f8a66-208d-4f6c-9d13-49c10b1556b3.png#clientId=u0af62612-21ca-4&amp;from=paste&amp;height=428&amp;id=u1036ae48&amp;name=image.png&amp;originHeight=856&amp;originWidth=2622&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=802551&amp;status=done&amp;style=none&amp;taskId=ufaf952d9-f6c3-47e1-ae1c-5b2e9854af0&amp;title=&amp;width=1311" alt="image.png"></p><h3 id="新生代-vs-老生代" tabindex="-1">新生代 VS 老生代 <a class="header-anchor" href="#新生代-vs-老生代" aria-label="Permalink to &quot;新生代 VS 老生代&quot;">​</a></h3><ul><li>新生代区域垃圾回收使用<strong>空间换时间</strong><ul><li>主要采用复制算法，要有空闲空间存在，当然新生代本身空间小，分出来的复制的空间更小，所以浪费这点空间换取时间的效率是微不足道的</li></ul></li><li>老生代区域垃圾回收不适合复制算法，老生代空间大一分为二，会造成一半的空间浪费，存放数据多复制时间长。</li></ul><h2 id="什么时候触发cg" tabindex="-1">什么时候触发CG <a class="header-anchor" href="#什么时候触发cg" aria-label="Permalink to &quot;什么时候触发CG&quot;">​</a></h2><p><img src="https://cdn.nlark.com/yuque/0/2021/png/292785/1638258615854-45b25718-1860-419f-8d7b-6bc865c5b88b.png#clientId=u0af62612-21ca-4&amp;from=paste&amp;height=493&amp;id=u3df3037f&amp;name=image.png&amp;originHeight=986&amp;originWidth=2238&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=806151&amp;status=done&amp;style=none&amp;taskId=u1e67a85a-f0ec-4e46-af44-07d99224d63&amp;title=&amp;width=1119" alt="image.png"> ps：全局变量程序执行完才会被回收 局部变量失去引用的时候会被回收</p><h2 id="优化内存" tabindex="-1">优化内存 <a class="header-anchor" href="#优化内存" aria-label="Permalink to &quot;优化内存&quot;">​</a></h2><h3 id="查看内存" tabindex="-1">查看内存 <a class="header-anchor" href="#查看内存" aria-label="Permalink to &quot;查看内存&quot;">​</a></h3><ul><li>web window.performance.memory</li><li>node process.memoryUsage()</li></ul><h3 id="优化建议" tabindex="-1">优化建议 <a class="header-anchor" href="#优化建议" aria-label="Permalink to &quot;优化建议&quot;">​</a></h3><ul><li>尽量不要定义全局变量 定义需要手动释放 a = null // a = undefined</li><li>注意闭包</li></ul><p>传统的浏览器里面 垃圾回收是自动的 node可以手动触发垃圾回收 global.gc node端可以设置内存 node --max-old-space-size=1700 test.js</p></div></div></main><footer class="VPDocFooter" data-v-f3a512fe data-v-10feed38><!--[--><!--[--><!--[--><!--[--><div class="doc-comments"><!----></div><!--]--><!--]--><!--]--><!--]--><div class="edit-info" data-v-10feed38><!----><div class="last-updated" data-v-10feed38><p class="VPLastUpdated" data-v-10feed38 data-v-f76ee3d8>最后更新于: <time datetime="2023-02-28T09:07:38.000Z" data-v-f76ee3d8></time></p></div></div><!----></footer><!--[--><!--[--><!--[--><div style="display:none;" class="m-doc-footer" data-v-694eb995><div class="m-doc-footer-message" data-v-694eb995><img class="visitor" src="https://visitor-badge.laobi.icu/badge?page_id=maomao1996.vitepress-nav-template./interview/js/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86" title="当前页面累计访问数" onerror="this.style.display=&#39;none&#39;" data-v-694eb995><p data-v-694eb995>如有转载或 CV 的请标注本站原文地址</p></div><p class="m-doc-footer-copyright" data-v-694eb995>Copyright © 2019-present maomao</p></div><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-38af85f1 data-v-dc9b186f><div class="container" data-v-dc9b186f><p class="message" data-v-dc9b186f>如有转载或 CV 的请标注本站原文地址</p><p class="copyright" data-v-dc9b186f>Copyright © 2019-present maomao</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"analysis_cli_index.md\":\"BdW7sfvb\",\"analysis_react_index.md\":\"Bn22cXAE\",\"analysis_utils_index.md\":\"PypUe-JJ\",\"analysis_vue_index.md\":\"DBmpwdZw\",\"fe_electron.md\":\"DXxwpVhe\",\"fe_index.md\":\"DUnKQcpd\",\"fe_nuxt.md\":\"DmK69tHU\",\"fe_uniapp.md\":\"byL5xptc\",\"index.md\":\"BRWZZVDp\",\"internet_osi七层模型.md\":\"DoE-9zb0\",\"internet_tcp_ip协议群.md\":\"yq6O5Rwh\",\"internet_计算机网络简史.md\":\"DufpYJ7T\",\"interview_js_debounce.md\":\"mMql-1LU\",\"interview_js_index.md\":\"CkGyI7xf\",\"interview_js_javascript如何工作.md\":\"Bfwg-FFx\",\"interview_js_js中的栈内存堆内存.md\":\"Dy1TnaQY\",\"interview_js_ts.md\":\"D1Bt8mE8\",\"interview_js_内存管理.md\":\"gDrdGZ7k\",\"interview_js_异步.md\":\"BfR2Rol9\",\"interview_other_index.md\":\"BK68eMlp\",\"interview_other_干爆前端.md\":\"Bjkui-0D\",\"interview_other_算法.md\":\"Ba2DFhsX\",\"interview_vue_index.md\":\"C4ESgBSv\",\"interview_vue_vdom.md\":\"Bz7C2jTG\",\"interview_vue_进阶.md\":\"aH4271FJ\",\"interview_vue_高级.md\":\"jU1b3IjC\",\"nav_index.md\":\"DduwP6Fw\",\"others_axure.md\":\"_K6ELOSm\",\"others_产品设计思维.md\":\"DpLyFh7E\",\"workflow_chrome debugger.md\":\"DZXEn4Sp\",\"workflow_chrome扩展插件.md\":\"DE-iQsgo\",\"workflow_git.md\":\"Cog5Tu1S\",\"workflow_npm发布.md\":\"QcsiKI0S\",\"workflow_shell.md\":\"Bhv2aw4d\",\"workflow_vue3.0项目工程环境.md\":\"BDi6wrbp\",\"workflow_vue3.md\":\"C6f9kUKa\",\"workflow_webpack.md\":\"B42-sif1\",\"workflow_前端工具.md\":\"Co9k7NcA\",\"workflow_大文件上传.md\":\"C2uvTt5y\",\"workflow_字符串技巧.md\":\"DynroC9U\",\"workflow_常用的方法.md\":\"BF4vndZX\",\"workflow_源码阅读.md\":\"Cj1nbyUk\",\"workflow_黑魔法.md\":\"g7TQumpj\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"野生动物\",\"description\":\"茂茂的成长之路，包含前端常用知识、源码阅读笔记、各种奇淫技巧、日常提效工具等\",\"base\":\"/Blog/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"i18nRouting\":false,\"logo\":\"/mine.jpg\",\"nav\":[{\"text\":\"前端导航\",\"link\":\"/nav/\"},{\"text\":\"前端物语\",\"items\":[{\"text\":\"JS基础知识\",\"link\":\"https://github.com/wild2life/Blog\"},{\"text\":\"JS基础知识\",\"link\":\"https://github.com/wild2life/Blog\"},{\"text\":\"JS基础知识\",\"link\":\"https://github.com/wild2life/Blog\"},{\"text\":\"ES6常用知识\",\"link\":\"https://github.com/wild2life/Blog\"},{\"text\":\"Monorepo\",\"link\":\"https://github.com/wild2life/Blog\"}]},{\"text\":\"源码阅读\",\"items\":[{\"text\":\"Vue\",\"link\":\"https://github.com/wild2life/Blog\"},{\"text\":\"React\",\"link\":\"https://github.com/wild2life/Blog\"}]},{\"text\":\"笔记\",\"items\":[{\"text\":\"Vue\",\"link\":\"https://github.com/wild2life/Blog\"},{\"text\":\"React\",\"link\":\"https://github.com/wild2life/Blog\"}]}],\"sidebar\":{},\"outline\":{\"level\":\"deep\",\"label\":\"目录\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/wild2life/Blog\"}],\"footer\":{\"message\":\"如有转载或 CV 的请标注本站原文地址\",\"copyright\":\"Copyright © 2019-present maomao\"},\"lastUpdated\":{\"text\":\"最后更新于\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"medium\"}},\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"returnToTopLabel\":\"回到顶部\",\"sidebarMenuLabel\":\"菜单\",\"darkModeSwitchLabel\":\"主题\",\"lightModeSwitchTitle\":\"切换到浅色模式\",\"darkModeSwitchTitle\":\"切换到深色模式\",\"visitor\":{\"badgeId\":\"maomao1996.vitepress-nav-template\"},\"comment\":{\"repo\":\"wild2life/Blog\",\"repoId\":\"R_kgDOJC09Jg\",\"category\":\"Announcements\",\"categoryId\":\"DIC_kwDOJC09Js4Cekn0\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>